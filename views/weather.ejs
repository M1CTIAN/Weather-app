<%- include("partials/header"); -%>

<main class="flex-grow flex flex-col px-4 md:px-12 py-12 relative">
    
    <!-- Back Button (Minimal) -->
    <button onclick="window.location.href='/'" class="absolute top-8 left-8 md:left-12 text-stone-400 dark:text-stone-500 hover:text-stone-900 dark:hover:text-stone-100 transition-colors z-10">
        <i class="fas fa-arrow-left text-xl"></i>
    </button>

    <div class="max-w-7xl mx-auto w-full grid grid-cols-1 lg:grid-cols-12 gap-12 lg:gap-24">
        
        <!-- Left Column: Main Weather -->
        <div class="lg:col-span-5 flex flex-col justify-between h-full space-y-12 opacity-0 translate-y-10" id="weather-main">
            <div>
                <h1 class="text-5xl md:text-7xl font-serif text-stone-900 dark:text-stone-100 leading-none mb-2">
                    <%= current.cityName %>
                </h1>
                <p class="text-lg text-stone-500 dark:text-stone-400 font-sans capitalize"><%= current.weatherDescription %></p>
            </div>

            <div class="flex items-start gap-4">
                <span class="text-8xl md:text-9xl font-serif text-stone-900 dark:text-stone-100 leading-none tracking-tighter">
                    <%= Math.round(current.temperature) %>°
                </span>
                <img src="<%= current.weatherIcon %>" alt="icon" class="w-24 h-24 opacity-80 grayscale contrast-125 dark:invert">
            </div>

            <div class="grid grid-cols-2 gap-8 border-t border-stone-200 dark:border-stone-800 pt-8">
                <div>
                    <p class="text-xs uppercase tracking-widest text-stone-400 dark:text-stone-500 mb-1">Humidity</p>
                    <p class="text-xl font-medium text-stone-800 dark:text-stone-200"><%= current.humidity %>%</p>
                </div>
                <div>
                    <p class="text-xs uppercase tracking-widest text-stone-400 dark:text-stone-500 mb-1">Wind</p>
                    <p class="text-xl font-medium text-stone-800 dark:text-stone-200"><%= current.windSpeed %> <span class="text-sm text-stone-400 dark:text-stone-600">km/h</span></p>
                </div>
                <div>
                    <p class="text-xs uppercase tracking-widest text-stone-400 dark:text-stone-500 mb-1">Pressure</p>
                    <p class="text-xl font-medium text-stone-800 dark:text-stone-200"><%= current.pressure %> <span class="text-sm text-stone-400 dark:text-stone-600">hPa</span></p>
                </div>
                <div>
                    <p class="text-xs uppercase tracking-widest text-stone-400 dark:text-stone-500 mb-1">Visibility</p>
                    <p class="text-xl font-medium text-stone-800 dark:text-stone-200"><%= current.visibility / 1000 %> <span class="text-sm text-stone-400 dark:text-stone-600">km</span></p>
                </div>
            </div>
        </div>

        <!-- Right Column: Forecast -->
        <div class="lg:col-span-7 flex flex-col justify-end opacity-0 translate-y-10" id="weather-forecast">
            <h3 class="text-xs uppercase tracking-[0.2em] text-stone-400 dark:text-stone-500 mb-8">5-Day Forecast</h3>
            
            <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
                <% forecast.forEach(function(day, index) { %>
                    <div class="group p-6 border border-stone-100 dark:border-stone-800 hover:border-stone-300 dark:hover:border-stone-600 hover:bg-white dark:hover:bg-stone-900 transition-all duration-500 cursor-default flex flex-col items-center justify-center text-center aspect-[3/4]">
                        <p class="text-xs uppercase tracking-widest text-stone-400 dark:text-stone-500 mb-4">
                            <%= new Date(day.dt * 1000).toLocaleDateString('en-US', { weekday: 'short' }) %>
                        </p>
                        <img src="https://openweathermap.org/img/w/<%= day.weather[0].icon %>.png" alt="icon" class="w-12 h-12 mb-4 grayscale opacity-60 group-hover:grayscale-0 group-hover:opacity-100 transition-all duration-500 dark:invert dark:group-hover:invert-0">
                        <p class="text-2xl font-serif text-stone-800 dark:text-stone-200 mb-1">
                            <%= Math.round(day.main.temp) %>°
                        </p>
                        <p class="text-[10px] uppercase tracking-wider text-stone-400 dark:text-stone-500">
                            <%= day.weather[0].main %>
                        </p>
                    </div>
                <% }); %>
            </div>
        </div>

    </div>
</main>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const tl = gsap.timeline();
        
        tl.to("#weather-main", { opacity: 1, y: 0, duration: 1.2, ease: "power3.out" })
          .to("#weather-forecast", { opacity: 1, y: 0, duration: 1.2, ease: "power3.out" }, "-=0.8");
    });
</script>

<%- include("partials/footer"); -%>